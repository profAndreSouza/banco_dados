# Exercício de Banco de Dados – App de Encontros

Você foi contratado para modelar o banco de dados de um **aplicativo de encontros (namoro)**. O objetivo do sistema é permitir que usuários encontrem potenciais parceiros com base em interesses em comum e curtidas mútuas. Para isso, será necessário criar o modelo do banco, inserir dados fictícios e desenvolver consultas SQL conforme descrito abaixo.

## Requisitos do Banco de Dados

O sistema deverá conter, no mínimo, as seguintes entidades:

### 1. `usuarios`
- `id`: Identificador único
- `nome`
- `email`
- `data_nascimento`
- `genero`
- `cidade`

### 2. `interesses`
- `id`: Identificador único
- `descricao`: (Ex: “Música”, “Esportes”, “Leitura”, etc)

### 3. `curtidas`
- Representa quando um usuário curte o perfil de outro
- `id`
- `id_usuario_origem`
- `id_usuario_destino`
- `data_curtida`

### 4. `usuarios_interesses`
- Relacionamento N:N entre usuários e interesses
- `id_usuario`
- `id_interesse`


## Tarefas

### 1. Modelagem Conceitual
- Elabore o **Diagrama Entidade-Relacionamento (DER)** com:
  - Entidades
  - Atributos
  - Relacionamentos
  - Cardinalidades
  - Chaves primárias e estrangeiras


<img src="06.Aula_17abr.png" alt="DER Exemplo" />

### 2. Criação das Tabelas (DDL)
- Escreva os comandos SQL para criação das tabelas mencionadas.
- Inclua as restrições adequadas:
  - Chaves primárias
  - Chaves estrangeiras
  - Tipos de dados

```sql

CREATE TABLE usuarios (
    id SERIAL PRIMARY KEY,
    nome VARCHAR(100) NOT NULL, 
    email VARCHAR(100) NOT NULL UNIQUE, 
    data_nascimento DATE NOT NULL, 
    genero VARCHAR(1) NOT NULL CHECK (genero IN ('M', 'F')), 
    cidade VARCHAR(100) NOT NULL
);

CREATE TABLE curtidas (
    id SERIAL PRIMARY KEY,
    id_usuario_origem INTEGER REFERENCES usuarios(id) ON DELETE CASCADE,
    id_usuario_destino INTEGER REFERENCES usuarios(id) ON DELETE CASCADE,
    data_curtida TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(id_usuario_origem, id_usuario_destino)
);

CREATE TABLE interesses (
    id SERIAL PRIMARY KEY,
    descricao VARCHAR(100) NOT NULL
);

CREATE TABLE usuarios_interesses(
    id_usuario INTEGER REFERENCES usuarios(id) ON DELETE CASCADE,
    id_interesse INTEGER REFERENCES interesses(id) ON DELETE CASCADE,
    PRIMARY KEY(id_usuario, id_interesse)
);

```

### 3. Inserção de Dados (DML)
- Insira pelo menos:
  - 5 usuários
  - 4 interesses
  - Associe os usuários a 2 ou mais interesses cada
  - Registre pelo menos 6 curtidas entre os usuários

### 4. Consultas SQL

Realize as seguintes consultas utilizando os comandos indicados:

- a) Liste o nome de cada usuário e seus interesses  
  **→ Utilize `INNER JOIN`**

- b) Liste todos os usuários e seus interesses, mesmo que não tenham interesses cadastrados  
  **→ Utilize `LEFT JOIN`**

- c) Liste os pares de curtidas recíprocas (usuário A curtiu B e B também curtiu A), exibindo os nomes dos dois envolvidos

- d) Mostre a quantidade de curtidas recebidas por cada usuário, ordenadas da maior para a menor  
  **→ Utilize `GROUP BY`**

- e) Liste as cidades com maior número de usuários cadastrados  
  **→ Utilize `GROUP BY` e `COUNT`**


## Entrega esperada

Envie um repositório ou pacote contendo os seguintes arquivos:

- Arquivo com o **DER** (imagem ou PDF)
- Script `.sql` com:
  - Comandos DDL (criação das tabelas)
  - Comandos DML (inserção de dados)
  - Consultas SQL solicitadas
